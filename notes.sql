/*
Navicat MySQL Data Transfer

Source Server         : ks
Source Server Version : 50613
Source Host           : 127.0.0.1:3306
Source Database       : notes

Target Server Type    : MYSQL
Target Server Version : 50613
File Encoding         : 65001

Date: 2016-06-19 20:39:02
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for appendix
-- ----------------------------
DROP TABLE IF EXISTS `appendix`;
CREATE TABLE `appendix` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  `location` varchar(64) NOT NULL,
  `n_id` int(11) NOT NULL,
  `u_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `n_id` (`n_id`),
  KEY `u_id` (`u_id`),
  CONSTRAINT `appendix_ibfk_2` FOREIGN KEY (`u_id`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `appendix_ibfk_1` FOREIGN KEY (`n_id`) REFERENCES `note` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of appendix
-- ----------------------------
INSERT INTO `appendix` VALUES ('22', 'ajax.txt', '20160616/57624c6888aa2.txt', '37', '1');
INSERT INTO `appendix` VALUES ('23', 'api.txt', '20160616/57624c688c91d.txt', '37', '1');
INSERT INTO `appendix` VALUES ('25', '数据结构面试题(含答案).doc', '20160616/57624d2a26bc2.doc', '38', '1');
INSERT INTO `appendix` VALUES ('28', '微软等数据结构+算法面试100题全部答案集锦.pdf', '20160616/57624de6a81eb.pdf', '39', '1');
INSERT INTO `appendix` VALUES ('33', '自我介绍（英文1分钟版）.docx', '20160619/57668fcbcb183.docx', '42', '2');
INSERT INTO `appendix` VALUES ('34', '自我介绍（英文2分钟版）.docx', '20160619/57668fcbcf2f8.docx', '42', '2');

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  `u_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `u_id` (`u_id`),
  CONSTRAINT `category_ibfk_1` FOREIGN KEY (`u_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=18 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of category
-- ----------------------------
INSERT INTO `category` VALUES ('10', 'linux', '1');
INSERT INTO `category` VALUES ('11', 'android', '1');
INSERT INTO `category` VALUES ('13', 'php', '1');
INSERT INTO `category` VALUES ('14', 'c++/c', '1');
INSERT INTO `category` VALUES ('15', '考研数学', '2');
INSERT INTO `category` VALUES ('16', '考研英语', '2');
INSERT INTO `category` VALUES ('17', '华为1', '3');

-- ----------------------------
-- Table structure for note
-- ----------------------------
DROP TABLE IF EXISTS `note`;
CREATE TABLE `note` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `content` text NOT NULL,
  `publish_time` datetime NOT NULL,
  `u_id` int(11) NOT NULL,
  `c_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `u_id` (`u_id`),
  KEY `c_id` (`c_id`),
  CONSTRAINT `note_ibfk_1` FOREIGN KEY (`u_id`) REFERENCES `user` (`id`) ON DELETE CASCADE,
  CONSTRAINT `note_ibfk_2` FOREIGN KEY (`c_id`) REFERENCES `category` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of note
-- ----------------------------
INSERT INTO `note` VALUES ('37', 'php编程', '&lt;pre class=\\&quot;brush:php;toolbar:false\\&quot;&gt;&amp;lt;?php\r\n	\r\nnamespace&amp;nbsp;Index\\\\Controller;\r\nuse&amp;nbsp;Think\\\\Controller;\r\n\r\n/**\r\n&amp;nbsp;*&amp;nbsp;@author&amp;nbsp;dongtian&amp;nbsp;&amp;lt;dongtian@nuaa.edu.cn&amp;gt;\r\n&amp;nbsp;*&amp;nbsp;笔记附件管理控制器\r\n&amp;nbsp;*/\r\n&amp;nbsp;class&amp;nbsp;AppendixController&amp;nbsp;extends&amp;nbsp;CommonController{\r\n&amp;nbsp;		\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;listView(){\r\n&amp;nbsp;			$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;笔记附件信息列表&amp;#39;;\r\n&amp;nbsp;			$p&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.p&amp;#39;,1,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;			$list&amp;nbsp;=&amp;nbsp;M()-&amp;gt;page($p&amp;nbsp;.&amp;nbsp;&amp;#39;,8&amp;#39;)-&amp;gt;query(&amp;quot;select&amp;nbsp;appendix.id&amp;nbsp;id,appendix.name&amp;nbsp;name,location,n_id,title&amp;nbsp;from&amp;nbsp;appendix,note&amp;nbsp;where&amp;nbsp;appendix.n_id=note.id&amp;nbsp;&amp;quot;);\r\n&amp;nbsp;			$count&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;count(*)&amp;nbsp;count&amp;nbsp;from&amp;nbsp;appendix&amp;quot;);\r\n&amp;nbsp;			$count&amp;nbsp;=&amp;nbsp;intval($count[0]);\r\n&amp;nbsp;			//实例化分页类\r\n&amp;nbsp;			$Page&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Page($count,8);\r\n&amp;nbsp;			$Page-&amp;gt;setConfig(&amp;#39;header&amp;#39;,&amp;nbsp;&amp;#39;个附件&amp;#39;);\r\n			$Page-&amp;gt;setConfig(&amp;#39;prev&amp;#39;,&amp;nbsp;&amp;#39;上一页&amp;#39;);\r\n			$Page-&amp;gt;setConfig(&amp;#39;next&amp;#39;,&amp;nbsp;&amp;#39;下一页&amp;#39;);\r\n			$Page-&amp;gt;setConfig(&amp;#39;first&amp;#39;,&amp;nbsp;&amp;#39;第一页&amp;#39;);\r\n			$Page-&amp;gt;setConfig(&amp;#39;last&amp;#39;,&amp;nbsp;&amp;#39;最后页&amp;#39;);\r\n			$show&amp;nbsp;=&amp;nbsp;$Page-&amp;gt;show();&amp;nbsp;//&amp;nbsp;分页显示输出\r\n			$this-&amp;gt;files&amp;nbsp;=&amp;nbsp;$list;&amp;nbsp;//&amp;nbsp;赋值\r\n			$this-&amp;gt;page&amp;nbsp;=&amp;nbsp;$show;&amp;nbsp;//&amp;nbsp;赋值分页输出\r\n			\r\n			$this-&amp;gt;display();\r\n&amp;nbsp;		}\r\n\r\n&amp;nbsp;		/**\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;添加下载资料信息\r\n&amp;nbsp;		&amp;nbsp;*/\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;add(){\r\n&amp;nbsp;			$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;添加下载资料信息&amp;#39;;\r\n&amp;nbsp;			$this-&amp;gt;types&amp;nbsp;=&amp;nbsp;M(&amp;#39;types_file&amp;#39;)-&amp;gt;select();\r\n&amp;nbsp;			$this-&amp;gt;display();\r\n&amp;nbsp;		}\r\n&amp;nbsp;		/**\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;执行添加\r\n&amp;nbsp;		&amp;nbsp;*/\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;addDo(){\r\n&amp;nbsp;			$file_model&amp;nbsp;=&amp;nbsp;M(&amp;#39;files&amp;#39;);\r\n&amp;nbsp;			$data&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.&amp;#39;);\r\n&amp;nbsp;			$data[&amp;#39;create_time&amp;#39;]&amp;nbsp;=&amp;nbsp;date(&amp;quot;Y-m-d&amp;nbsp;H:i:s&amp;quot;);\r\n			$data[&amp;#39;update_time&amp;#39;]&amp;nbsp;=&amp;nbsp;date(&amp;quot;Y-m-d&amp;nbsp;H:i:s&amp;quot;);\r\n&amp;nbsp;			$config&amp;nbsp;=&amp;nbsp;array(&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;930456592,\r\n			&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Uploads/Files/&amp;#39;,\r\n			&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n			&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n			);\r\n			$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n			$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;uploadOne($_FILES[&amp;#39;fileurl&amp;#39;]);\r\n			if&amp;nbsp;(!$info)&amp;nbsp;{\r\n				//&amp;nbsp;上传错误提示错误信息\r\n				$this-&amp;gt;error($upload-&amp;gt;getError());\r\n			}else&amp;nbsp;{\r\n				//&amp;nbsp;上传成功&amp;nbsp;获取上传文件信息\r\n				$fileurl&amp;nbsp;=&amp;nbsp;$info[&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[&amp;#39;savename&amp;#39;];\r\n				$data[&amp;#39;fileurl&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n			}\r\n&amp;nbsp;			$result&amp;nbsp;=&amp;nbsp;$file_model-&amp;gt;add($data);\r\n&amp;nbsp;			if($result){\r\n&amp;nbsp;				$this-&amp;gt;success(&amp;quot;添加成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Appendix/listView&amp;#39;));\r\n&amp;nbsp;			}else{\r\n&amp;nbsp;				$this-&amp;gt;error(&amp;#39;添加失败&amp;#39;);\r\n&amp;nbsp;			}\r\n&amp;nbsp;		}\r\n&amp;nbsp;		/**\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;顾客信息修改\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;[type]&amp;nbsp;[description]\r\n&amp;nbsp;		&amp;nbsp;*/\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;edit(){\r\n&amp;nbsp;			$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;修改笔记附件信息&amp;#39;;\r\n&amp;nbsp;			$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;			$map[&amp;#39;id&amp;#39;]&amp;nbsp;=&amp;nbsp;$id;\r\n&amp;nbsp;			$this-&amp;gt;file&amp;nbsp;=&amp;nbsp;D(&amp;#39;FileRelation&amp;#39;)-&amp;gt;relation(&amp;#39;file_type&amp;#39;)-&amp;gt;where($map)-&amp;gt;find();\r\n&amp;nbsp;			$this-&amp;gt;display();\r\n&amp;nbsp;		}\r\n&amp;nbsp;		/**\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;执行修改\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;[type]&amp;nbsp;[description]\r\n&amp;nbsp;		&amp;nbsp;*/\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;editDo(){\r\n&amp;nbsp;			$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;			$map[&amp;#39;id&amp;#39;]&amp;nbsp;=&amp;nbsp;$id;\r\n&amp;nbsp;			$data&amp;nbsp;=&amp;nbsp;$_POST;\r\n&amp;nbsp;			$data[&amp;#39;update_time&amp;#39;]&amp;nbsp;=&amp;nbsp;date(&amp;quot;Y-m-d&amp;nbsp;H:i:s&amp;quot;);\r\n&amp;nbsp;			$file_model&amp;nbsp;=&amp;nbsp;D(&amp;#39;FileRelation&amp;#39;);\r\n&amp;nbsp;			$config&amp;nbsp;=&amp;nbsp;array(&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;3145728,\r\n			&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Uploads/Files/&amp;#39;,\r\n			&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n			&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n			);\r\n			//有文件上传\r\n			if($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;]&amp;nbsp;!=&amp;nbsp;null)	{\r\n\r\n				$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n				$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;uploadOne($_FILES[&amp;#39;fileurl&amp;#39;]);\r\n				if&amp;nbsp;(!$info)&amp;nbsp;{\r\n					//&amp;nbsp;上传错误提示错误信息\r\n					$this-&amp;gt;error($upload-&amp;gt;getError());\r\n				}else&amp;nbsp;{\r\n					//删除旧的资料\r\n					$fileurl&amp;nbsp;=&amp;nbsp;$file_model-&amp;gt;where($map)-&amp;gt;getField(&amp;#39;fileurl&amp;#39;);\r\n					$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Uploads/Files/&amp;quot;&amp;nbsp;.&amp;nbsp;$fileurl;&amp;nbsp;\r\n					unlink($file_name);\r\n					//&amp;nbsp;上传成功&amp;nbsp;获取上传文件信息\r\n					$fileurl&amp;nbsp;=&amp;nbsp;$info[&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[&amp;#39;savename&amp;#39;];\r\n					$data[&amp;#39;fileurl&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n				}\r\n			}\r\n&amp;nbsp;			$result&amp;nbsp;=&amp;nbsp;$file_model-&amp;gt;save($data);\r\n&amp;nbsp;			if($result){\r\n&amp;nbsp;				$this-&amp;gt;success(&amp;quot;修改成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Appendix/listView&amp;#39;));\r\n&amp;nbsp;			}else{\r\n&amp;nbsp;				$this-&amp;gt;error(&amp;#39;修改失败&amp;#39;);\r\n&amp;nbsp;			}\r\n&amp;nbsp;		}\r\n&amp;nbsp;		/**\r\n&amp;nbsp;		&amp;nbsp;*&amp;nbsp;&amp;nbsp;删除附件\r\n&amp;nbsp;		&amp;nbsp;*/\r\n&amp;nbsp;		public&amp;nbsp;function&amp;nbsp;delete(){\r\n&amp;nbsp;			$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;			$fileurl&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$id&amp;quot;);\r\n&amp;nbsp;			$fileurl&amp;nbsp;=&amp;nbsp;$fileurl[0][&amp;#39;location&amp;#39;];\r\n			if&amp;nbsp;($fileurl)&amp;nbsp;{\r\n				$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Appendix/&amp;quot;&amp;nbsp;.&amp;nbsp;$fileurl;\r\n					unlink($file_name);\r\n			}\r\n&amp;nbsp;			$result&amp;nbsp;=&amp;nbsp;M()-&amp;gt;execute(&amp;quot;delete&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$id&amp;quot;);\r\n&amp;nbsp;			if($result){\r\n&amp;nbsp;				$this-&amp;gt;success(&amp;quot;删除成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Appendix/listView&amp;#39;));\r\n&amp;nbsp;			}else{\r\n&amp;nbsp;				$this-&amp;gt;error(&amp;#39;删除失败&amp;#39;);\r\n&amp;nbsp;			}\r\n&amp;nbsp;		}	\r\n&amp;nbsp;}&amp;nbsp;\r\n\r\n?&amp;gt;&lt;/pre&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;', '2016-06-16 14:51:20', '1', '13');
INSERT INTO `note` VALUES ('38', 'linux shell', '&lt;p&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0028.gif\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0042.gif\\&quot;/&gt;&amp;nbsp; linux &amp;nbsp;shell &amp;nbsp; &amp;nbsp;！~~~~~~~~~~~~~~~~~~~~~~~~~&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;img src=\\&quot;http://img.baidu.com/hi/jx2/j_0001.gif\\&quot; style=\\&quot;white-space: normal;\\&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img width=\\&quot;530\\&quot; height=\\&quot;340\\&quot; src=\\&quot;http://api.map.baidu.com/staticimage?center=118.794869,31.947546&amp;zoom=17&amp;width=530&amp;height=340&amp;markers=118.840629,31.828228\\&quot;/&gt;&lt;/p&gt;', '2016-06-16 14:54:34', '1', '10');
INSERT INTO `note` VALUES ('39', 'android：从入门到秃顶', '&lt;p&gt;Android是一种基于&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/1634.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;Linux&lt;/a&gt;的自由及开放源代码的&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/880.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;操作系统&lt;/a&gt;，主要使用于&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/8323830.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;移动设备&lt;/a&gt;，如&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/535.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;智能手机&lt;/a&gt;和&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/74538.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;平板电脑&lt;/a&gt;，由&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/105.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;Google&lt;/a&gt;公司和&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/1245202.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;开放手机联盟&lt;/a&gt;领导及开发。尚未有统一中文名称，中国大陆地区较多人使用“&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/3091265.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;安卓&lt;/a&gt;”或“&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/3132747.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;安致&lt;/a&gt;”。Android操作系统最初由&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/3949140.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;Andy Rubin&lt;/a&gt;开发，主要支持&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/subview/1455/5443915.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;手机&lt;/a&gt;。2005年8月由Google收购注资。2007年11月，Google与84家硬件制造商、软件开发商及电信营运商组建开放手机联盟共同研发改良Android系统。随后Google以Apache开源许可证的授权方式，发布了Android的源代码。第一部Android智能手机发布于2008年10月。Android逐渐扩展到&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/74538.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;平板电脑&lt;/a&gt;及其他领域上，如&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/8623.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;电视&lt;/a&gt;、&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/13650.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;数码相机&lt;/a&gt;、&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/15830.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;游戏机&lt;/a&gt;等。2011年第一季度，Android在全球的市场份额首次超过&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/view/2059103.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;塞班系统&lt;/a&gt;，跃居全球第一。 2013年的第四季度，Android平台手机的全球市场份额已经达到78.1%。&lt;span style=\\&quot;font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; margin-left: 2px; color: rgb(51, 102, 204); cursor: default; padding: 0px 2px;\\&quot;&gt;[1]&lt;/span&gt;&lt;a style=\\&quot;color: rgb(19, 110, 194); position: relative; top: -50px; font-size: 0px; line-height: 0;\\&quot; name=\\&quot;ref_[1]_9322617\\&quot;&gt;&lt;/a&gt;&amp;nbsp;&amp;nbsp;2013年09月24日谷歌开发的操作系统Android在迎来了5岁生日，全世界采用这款系统的设备数量已经达到10亿台。&lt;/p&gt;&lt;p&gt;2014第一季度Android平台已占所有移动广告流量来源的42.8%，首度&lt;a target=\\&quot;_blank\\&quot; href=\\&quot;http://baike.baidu.com/subview/96069/11090425.htm\\&quot; style=\\&quot;color: rgb(19, 110, 194); text-decoration: none;\\&quot;&gt;超越&lt;/a&gt;iOS。但运营收入不及iOS。&lt;span style=\\&quot;font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; margin-left: 2px; color: rgb(51, 102, 204); cursor: default; padding: 0px 2px;\\&quot;&gt;[2]&lt;/span&gt;&lt;a style=\\&quot;color: rgb(19, 110, 194); position: relative; top: -50px; font-size: 0px; line-height: 0;\\&quot; name=\\&quot;ref_[2]_9322617\\&quot;&gt;&lt;/a&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;14:58:412016-06-16&lt;/p&gt;&lt;p&gt;&lt;img src=\\&quot;/ueditor/php/upload/image/20160616/1466060499112205.jpg\\&quot; title=\\&quot;1466060499112205.jpg\\&quot; alt=\\&quot;黑色壁纸.jpg\\&quot;/&gt;&lt;/p&gt;_ueditor_page_break_tag_&lt;hr/&gt;&lt;pre class=\\&quot;brush:sql;toolbar:false\\&quot;&gt;/*\r\nNavicat&amp;nbsp;MySQL&amp;nbsp;Data&amp;nbsp;Transfer\r\n\r\nSource&amp;nbsp;Server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&amp;nbsp;ks\r\nSource&amp;nbsp;Server&amp;nbsp;Version&amp;nbsp;:&amp;nbsp;50613\r\nSource&amp;nbsp;Host&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&amp;nbsp;127.0.0.1:3306\r\nSource&amp;nbsp;Database&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&amp;nbsp;notes\r\n\r\nTarget&amp;nbsp;Server&amp;nbsp;Type&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&amp;nbsp;MYSQL\r\nTarget&amp;nbsp;Server&amp;nbsp;Version&amp;nbsp;:&amp;nbsp;50613\r\nFile&amp;nbsp;Encoding&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&amp;nbsp;65001\r\n\r\nDate:&amp;nbsp;2016-06-15&amp;nbsp;19:26:22\r\n*/\r\n\r\nSET&amp;nbsp;FOREIGN_KEY_CHECKS=0;\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Table&amp;nbsp;structure&amp;nbsp;for&amp;nbsp;appendix\r\n--&amp;nbsp;----------------------------\r\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`appendix`;\r\nCREATE&amp;nbsp;TABLE&amp;nbsp;`appendix`&amp;nbsp;(\r\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT,\r\n&amp;nbsp;&amp;nbsp;`name`&amp;nbsp;varchar(32)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`location`&amp;nbsp;varchar(64)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`n_id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`),\r\n&amp;nbsp;&amp;nbsp;KEY&amp;nbsp;`appendix_note`&amp;nbsp;(`n_id`)\r\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;AUTO_INCREMENT=8&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8;\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Records&amp;nbsp;of&amp;nbsp;appendix\r\n--&amp;nbsp;----------------------------\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Table&amp;nbsp;structure&amp;nbsp;for&amp;nbsp;category\r\n--&amp;nbsp;----------------------------\r\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`category`;\r\nCREATE&amp;nbsp;TABLE&amp;nbsp;`category`&amp;nbsp;(\r\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT,\r\n&amp;nbsp;&amp;nbsp;`name`&amp;nbsp;varchar(32)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)\r\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;AUTO_INCREMENT=9&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8;\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Records&amp;nbsp;of&amp;nbsp;category\r\n--&amp;nbsp;----------------------------\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Table&amp;nbsp;structure&amp;nbsp;for&amp;nbsp;note\r\n--&amp;nbsp;----------------------------\r\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`note`;\r\nCREATE&amp;nbsp;TABLE&amp;nbsp;`note`&amp;nbsp;(\r\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT,\r\n&amp;nbsp;&amp;nbsp;`title`&amp;nbsp;varchar(255)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`content`&amp;nbsp;text&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`publish_time`&amp;nbsp;datetime&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`u_id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`c_id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`),\r\n&amp;nbsp;&amp;nbsp;KEY&amp;nbsp;`note_user`&amp;nbsp;(`u_id`),\r\n&amp;nbsp;&amp;nbsp;KEY&amp;nbsp;`note_category`&amp;nbsp;(`c_id`)\r\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;AUTO_INCREMENT=25&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8;\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Records&amp;nbsp;of&amp;nbsp;note\r\n--&amp;nbsp;----------------------------\r\nINSERT&amp;nbsp;INTO&amp;nbsp;`note`&amp;nbsp;VALUES&amp;nbsp;(&amp;#39;23&amp;#39;,&amp;nbsp;&amp;#39;linux多进程编程&amp;#39;,&amp;nbsp;&amp;#39;&amp;amp;lt;p&amp;amp;gt;sdfsdfsdfdsfdsfdsfdsfds&amp;amp;lt;/p&amp;amp;gt;&amp;#39;,&amp;nbsp;&amp;#39;2016-06-15&amp;nbsp;17:46:09&amp;#39;,&amp;nbsp;&amp;#39;1&amp;#39;,&amp;nbsp;&amp;#39;8&amp;#39;);\r\nINSERT&amp;nbsp;INTO&amp;nbsp;`note`&amp;nbsp;VALUES&amp;nbsp;(&amp;#39;24&amp;#39;,&amp;nbsp;&amp;#39;sfsdfsd&amp;#39;,&amp;nbsp;&amp;#39;&amp;amp;lt;p&amp;amp;gt;xcvxcvxcvxcvxcvc&amp;amp;lt;/p&amp;amp;gt;&amp;#39;,&amp;nbsp;&amp;#39;2016-06-15&amp;nbsp;17:46:30&amp;#39;,&amp;nbsp;&amp;#39;1&amp;#39;,&amp;nbsp;&amp;#39;8&amp;#39;);\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Table&amp;nbsp;structure&amp;nbsp;for&amp;nbsp;user\r\n--&amp;nbsp;----------------------------\r\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`user`;\r\nCREATE&amp;nbsp;TABLE&amp;nbsp;`user`&amp;nbsp;(\r\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(11)&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT,\r\n&amp;nbsp;&amp;nbsp;`name`&amp;nbsp;varchar(32)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;`password`&amp;nbsp;varchar(64)&amp;nbsp;NOT&amp;nbsp;NULL,\r\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)\r\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;AUTO_INCREMENT=3&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8;\r\n\r\n--&amp;nbsp;----------------------------\r\n--&amp;nbsp;Records&amp;nbsp;of&amp;nbsp;user\r\n--&amp;nbsp;----------------------------\r\nINSERT&amp;nbsp;INTO&amp;nbsp;`user`&amp;nbsp;VALUES&amp;nbsp;(&amp;#39;1&amp;#39;,&amp;nbsp;&amp;#39;admin&amp;#39;,&amp;nbsp;&amp;#39;21232f297a57a5a743894a0e4a801fc3&amp;#39;);\r\n\r\n\r\n傻逼了吧&lt;/pre&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&lt;p style=\\&quot;display:none;\\&quot; data-background=\\&quot;background-repeat:no-repeat; background-position:center center; background-color:#548DD4;\\&quot;&gt;&lt;br/&gt;&lt;/p&gt;', '2016-06-16 14:57:42', '1', '11');
INSERT INTO `note` VALUES ('40', 'c入门知识', '&lt;p&gt;手动阀手动阀手动阀手动阀手动阀手动阀是&lt;/p&gt;&lt;p&gt;手动阀手动阀手动阀vasdfvsdfvasdvdv发射点&lt;br/&gt;&lt;/p&gt;', '2016-06-19 18:16:02', '1', '14');
INSERT INTO `note` VALUES ('41', '考研数学满分攻略', '&lt;p&gt;是vs打发手动阀手动阀手动阀手动阀手动阀线程vvdssdvsssssssssssss&lt;/p&gt;&lt;pre class=\\&quot;brush:php;toolbar:false\\&quot;&gt;&amp;lt;?php\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;namespace&amp;nbsp;Index\\\\Controller;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;use&amp;nbsp;Think\\\\Controller;\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;笔记控制器\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@author&amp;nbsp;dongtian&amp;nbsp;&amp;lt;dongtian@nuaa.edu.cn&amp;gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class&amp;nbsp;NoteController&amp;nbsp;extends&amp;nbsp;CommonController&amp;nbsp;{\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*笔记列表展示\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;listView(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$_SESSION[C(&amp;#39;USER_AUTH_KEY&amp;#39;)];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$p&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.p&amp;#39;,1,&amp;#39;intval&amp;#39;);//笔记页码参数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$count&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;query(&amp;#39;select&amp;nbsp;count(*)&amp;nbsp;count&amp;nbsp;from&amp;nbsp;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$count&amp;nbsp;=&amp;nbsp;intval($count[0][&amp;#39;count&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;select&amp;nbsp;note.id&amp;nbsp;id,c_id,title,content,publish_time,category.name&amp;nbsp;c_name&amp;nbsp;from&amp;nbsp;note,category&amp;nbsp;where&amp;nbsp;note.c_id=category.id&amp;nbsp;&amp;nbsp;and&amp;nbsp;note.u_id=$uid&amp;quot;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$notes&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;page($p.&amp;#39;,8&amp;#39;)-&amp;gt;query($sql);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Page($count,8);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;header&amp;#39;,&amp;#39;片笔记&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;prev&amp;#39;,&amp;#39;上一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;next&amp;#39;,&amp;#39;下一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;first&amp;#39;,&amp;#39;第一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;last&amp;#39;,&amp;#39;最后页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$page&amp;nbsp;=&amp;nbsp;$Page-&amp;gt;show();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;笔记列表&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;page&amp;nbsp;=&amp;nbsp;$page;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;notes&amp;nbsp;=&amp;nbsp;$notes;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;笔记详情显示\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;view(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;笔记详情&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$GLOBALS[&amp;#39;uid&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;select&amp;nbsp;note.id&amp;nbsp;id,c_id,title,content,publish_time,category.name&amp;nbsp;c_name&amp;nbsp;from&amp;nbsp;note,category&amp;nbsp;where&amp;nbsp;note.c_id=category.id&amp;nbsp;&amp;nbsp;and&amp;nbsp;&amp;nbsp;note.id&amp;nbsp;=&amp;nbsp;$id&amp;quot;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query($sql);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note&amp;nbsp;=&amp;nbsp;$this-&amp;gt;note[0];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note[&amp;#39;content&amp;#39;]&amp;nbsp;=&amp;nbsp;htmlspecialchars_decode(stripslashes($note[&amp;#39;content&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;appendixes&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;name,location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//dump($this-&amp;gt;appendixes);die;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;$note;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;添加笔记\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;add(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$GLOBALS[&amp;#39;uid&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;添加笔记&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;types_note&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;id,name&amp;nbsp;from&amp;nbsp;category&amp;nbsp;where&amp;nbsp;u_id=$uid&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;执行添加\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;addDo(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag;//是否进行了文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num;//上传文件的总数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.&amp;#39;);//要写入到notes表中的数据结构\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data[&amp;#39;publish_time&amp;#39;]&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data[&amp;#39;u_id&amp;#39;]&amp;nbsp;=&amp;nbsp;$_SESSION[C(&amp;#39;USER_AUTH_KEY&amp;#39;)];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][0]&amp;nbsp;===&amp;nbsp;&amp;quot;&amp;quot;){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;0;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;1;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num&amp;nbsp;=&amp;nbsp;count($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($flag){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;add($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$config&amp;nbsp;=&amp;nbsp;array(\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;0,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Appendix/&amp;#39;,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;upload(array($_FILES[&amp;#39;fileurl&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$info){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error($upload-&amp;gt;getError());\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//多文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app&amp;nbsp;=&amp;nbsp;array();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;$num;++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;n_id&amp;#39;]&amp;nbsp;=&amp;nbsp;intval($result);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;name&amp;#39;]&amp;nbsp;=&amp;nbsp;$_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][$i];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$fileurl&amp;nbsp;=&amp;nbsp;$info[$i][&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[$i][&amp;#39;savename&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;location&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result2&amp;nbsp;=&amp;nbsp;M(&amp;#39;appendix&amp;#39;)-&amp;gt;add($app);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;笔记添加成功，附件添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;添加成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//没有进行文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;add($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;添加成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;编辑笔记视图\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;edit(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;编辑笔记&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);//笔记的id\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;note&amp;nbsp;where&amp;nbsp;id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$result[0];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;#39;您要编辑的笔记不存在&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;categories&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;category&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result[&amp;#39;content&amp;#39;]&amp;nbsp;=&amp;nbsp;htmlspecialchars_decode(stripslashes($result[&amp;#39;content&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;appendixes&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;id,name,location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//dump($this-&amp;gt;appendixes);die;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;$result;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;执行添加\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;editDo(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag;//是否进行了文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num;//上传文件的总数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.&amp;#39;);//要写入到notes表中的数据结构\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][0]&amp;nbsp;===&amp;nbsp;&amp;quot;&amp;quot;){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;0;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;1;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num&amp;nbsp;=&amp;nbsp;count($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($flag){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;save($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;修改失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$config&amp;nbsp;=&amp;nbsp;array(\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;0,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Appendix/&amp;#39;,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;upload(array($_FILES[&amp;#39;fileurl&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$info){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error($upload-&amp;gt;getError());\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//多文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app&amp;nbsp;=&amp;nbsp;array();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;$num;++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;n_id&amp;#39;]&amp;nbsp;=&amp;nbsp;$data[&amp;#39;id&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;name&amp;#39;]&amp;nbsp;=&amp;nbsp;$_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][$i];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$fileurl&amp;nbsp;=&amp;nbsp;$info[$i][&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[$i][&amp;#39;savename&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;location&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result2&amp;nbsp;=&amp;nbsp;M(&amp;#39;appendix&amp;#39;)-&amp;gt;add($app);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;笔记修改成功，附件添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;修改成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//没有进行文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;save($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;修改成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;修改失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//响应客户端ajax请求\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;deleteAppendix(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$a_id&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.a_id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$n_id&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.n_id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$appendix&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$a_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;M()-&amp;gt;execute(&amp;quot;delete&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$a_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Appendix/&amp;quot;&amp;nbsp;.&amp;nbsp;$appendix[0][&amp;#39;location&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlink($file_name);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$n_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;ajaxReturn($result);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;删除笔记\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;delete(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$map[&amp;#39;id&amp;#39;]&amp;nbsp;=&amp;nbsp;$id;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_names&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;count($file_names);++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Appendix/&amp;quot;&amp;nbsp;.&amp;nbsp;$file_names[$i][&amp;#39;location&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlink($file_name);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;)-&amp;gt;where($map)-&amp;gt;delete();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;#39;删除成功&amp;#39;,U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;#39;删除失败&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n?&amp;gt;&lt;/pre&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;', '2016-06-19 20:23:29', '2', '15');
INSERT INTO `note` VALUES ('42', '考研数学满分攻略', '&lt;p&gt;是vs打发手动阀手动阀手动阀手动阀手动阀线程vvdssdv&lt;/p&gt;&lt;pre class=\\&quot;brush:php;toolbar:false\\&quot;&gt;&amp;lt;?php\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;namespace&amp;nbsp;Index\\\\Controller;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;use&amp;nbsp;Think\\\\Controller;\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;笔记控制器\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@author&amp;nbsp;dongtian&amp;nbsp;&amp;lt;dongtian@nuaa.edu.cn&amp;gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class&amp;nbsp;NoteController&amp;nbsp;extends&amp;nbsp;CommonController&amp;nbsp;{\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*笔记列表展示\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;listView(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$_SESSION[C(&amp;#39;USER_AUTH_KEY&amp;#39;)];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$p&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.p&amp;#39;,1,&amp;#39;intval&amp;#39;);//笔记页码参数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$count&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;query(&amp;#39;select&amp;nbsp;count(*)&amp;nbsp;count&amp;nbsp;from&amp;nbsp;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$count&amp;nbsp;=&amp;nbsp;intval($count[0][&amp;#39;count&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;select&amp;nbsp;note.id&amp;nbsp;id,c_id,title,content,publish_time,category.name&amp;nbsp;c_name&amp;nbsp;from&amp;nbsp;note,category&amp;nbsp;where&amp;nbsp;note.c_id=category.id&amp;nbsp;&amp;nbsp;and&amp;nbsp;note.u_id=$uid&amp;quot;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$notes&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;page($p.&amp;#39;,8&amp;#39;)-&amp;gt;query($sql);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Page($count,8);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;header&amp;#39;,&amp;#39;片笔记&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;prev&amp;#39;,&amp;#39;上一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;next&amp;#39;,&amp;#39;下一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;first&amp;#39;,&amp;#39;第一页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$Page-&amp;gt;setConfig(&amp;#39;last&amp;#39;,&amp;#39;最后页&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$page&amp;nbsp;=&amp;nbsp;$Page-&amp;gt;show();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;笔记列表&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;page&amp;nbsp;=&amp;nbsp;$page;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;notes&amp;nbsp;=&amp;nbsp;$notes;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;笔记详情显示\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;view(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;笔记详情&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$GLOBALS[&amp;#39;uid&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;select&amp;nbsp;note.id&amp;nbsp;id,c_id,title,content,publish_time,category.name&amp;nbsp;c_name&amp;nbsp;from&amp;nbsp;note,category&amp;nbsp;where&amp;nbsp;note.c_id=category.id&amp;nbsp;&amp;nbsp;and&amp;nbsp;&amp;nbsp;note.id&amp;nbsp;=&amp;nbsp;$id&amp;quot;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query($sql);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note&amp;nbsp;=&amp;nbsp;$this-&amp;gt;note[0];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note[&amp;#39;content&amp;#39;]&amp;nbsp;=&amp;nbsp;htmlspecialchars_decode(stripslashes($note[&amp;#39;content&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;appendixes&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;name,location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//dump($this-&amp;gt;appendixes);die;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;$note;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;添加笔记\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;add(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$uid&amp;nbsp;=&amp;nbsp;$GLOBALS[&amp;#39;uid&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;添加笔记&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;types_note&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;id,name&amp;nbsp;from&amp;nbsp;category&amp;nbsp;where&amp;nbsp;u_id=$uid&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;执行添加\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;addDo(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag;//是否进行了文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num;//上传文件的总数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.&amp;#39;);//要写入到notes表中的数据结构\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data[&amp;#39;publish_time&amp;#39;]&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data[&amp;#39;u_id&amp;#39;]&amp;nbsp;=&amp;nbsp;$_SESSION[C(&amp;#39;USER_AUTH_KEY&amp;#39;)];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][0]&amp;nbsp;===&amp;nbsp;&amp;quot;&amp;quot;){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;0;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;1;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num&amp;nbsp;=&amp;nbsp;count($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($flag){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;add($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$config&amp;nbsp;=&amp;nbsp;array(\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;0,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Appendix/&amp;#39;,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;upload(array($_FILES[&amp;#39;fileurl&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$info){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error($upload-&amp;gt;getError());\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//多文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app&amp;nbsp;=&amp;nbsp;array();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;$num;++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;n_id&amp;#39;]&amp;nbsp;=&amp;nbsp;intval($result);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;name&amp;#39;]&amp;nbsp;=&amp;nbsp;$_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][$i];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$fileurl&amp;nbsp;=&amp;nbsp;$info[$i][&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[$i][&amp;#39;savename&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;location&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result2&amp;nbsp;=&amp;nbsp;M(&amp;#39;appendix&amp;#39;)-&amp;gt;add($app);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;笔记添加成功，附件添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;添加成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//没有进行文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;add($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;添加成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;编辑笔记视图\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;edit(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;title&amp;nbsp;=&amp;nbsp;&amp;#39;编辑笔记&amp;#39;;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);//笔记的id\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;note&amp;nbsp;where&amp;nbsp;id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$result[0];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;#39;您要编辑的笔记不存在&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;categories&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;category&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result[&amp;#39;content&amp;#39;]&amp;nbsp;=&amp;nbsp;htmlspecialchars_decode(stripslashes($result[&amp;#39;content&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;appendixes&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;id,name,location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//dump($this-&amp;gt;appendixes);die;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;note&amp;nbsp;=&amp;nbsp;$result;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;display();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;执行添加\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;editDo(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag;//是否进行了文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num;//上传文件的总数\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$note_model&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.&amp;#39;);//要写入到notes表中的数据结构\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][0]&amp;nbsp;===&amp;nbsp;&amp;quot;&amp;quot;){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;0;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag&amp;nbsp;=&amp;nbsp;1;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num&amp;nbsp;=&amp;nbsp;count($_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;]);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($flag){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;save($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;修改失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$config&amp;nbsp;=&amp;nbsp;array(\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;maxSize&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;0,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;rootPath&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;&amp;#39;./Public/Appendix/&amp;#39;,\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;exts&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;doc&amp;#39;,&amp;nbsp;&amp;#39;docx&amp;#39;,&amp;nbsp;&amp;#39;pdf&amp;#39;,&amp;nbsp;&amp;#39;txt&amp;#39;,&amp;#39;rar&amp;#39;,&amp;#39;zip&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;subName&amp;#39;&amp;nbsp;=&amp;gt;&amp;nbsp;array(&amp;#39;date&amp;#39;,&amp;nbsp;&amp;#39;Ymd&amp;#39;),\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$upload&amp;nbsp;=&amp;nbsp;new&amp;nbsp;\\\\Think\\\\Upload($config);&amp;nbsp;//&amp;nbsp;实例化上传类\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$info&amp;nbsp;=&amp;nbsp;$upload-&amp;gt;upload(array($_FILES[&amp;#39;fileurl&amp;#39;]));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$info){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error($upload-&amp;gt;getError());\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//多文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app&amp;nbsp;=&amp;nbsp;array();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;$num;++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;n_id&amp;#39;]&amp;nbsp;=&amp;nbsp;$data[&amp;#39;id&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;name&amp;#39;]&amp;nbsp;=&amp;nbsp;$_FILES[&amp;#39;fileurl&amp;#39;][&amp;#39;name&amp;#39;][$i];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$fileurl&amp;nbsp;=&amp;nbsp;$info[$i][&amp;#39;savepath&amp;#39;]&amp;nbsp;.&amp;nbsp;$info[$i][&amp;#39;savename&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$app[&amp;#39;location&amp;#39;]&amp;nbsp;=&amp;nbsp;$fileurl;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result2&amp;nbsp;=&amp;nbsp;M(&amp;#39;appendix&amp;#39;)-&amp;gt;add($app);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;笔记修改成功，附件添加失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;修改成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//没有进行文件上传\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;$note_model-&amp;gt;save($data);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;quot;修改成功&amp;quot;,&amp;nbsp;U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;quot;修改失败&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//响应客户端ajax请求\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;deleteAppendix(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$a_id&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.a_id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$n_id&amp;nbsp;=&amp;nbsp;I(&amp;#39;post.n_id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$appendix&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$a_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;M()-&amp;gt;execute(&amp;quot;delete&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;id=$a_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Appendix/&amp;quot;&amp;nbsp;.&amp;nbsp;$appendix[0][&amp;#39;location&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlink($file_name);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$n_id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;ajaxReturn($result);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;删除笔记\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;delete(){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$id&amp;nbsp;=&amp;nbsp;I(&amp;#39;get.id&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;intval&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$map[&amp;#39;id&amp;#39;]&amp;nbsp;=&amp;nbsp;$id;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_names&amp;nbsp;=&amp;nbsp;M()-&amp;gt;query(&amp;quot;select&amp;nbsp;location&amp;nbsp;from&amp;nbsp;appendix&amp;nbsp;where&amp;nbsp;n_id=$id&amp;quot;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;count($file_names);++$i){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$file_name&amp;nbsp;=&amp;nbsp;&amp;quot;./Public/Appendix/&amp;quot;&amp;nbsp;.&amp;nbsp;$file_names[$i][&amp;#39;location&amp;#39;];\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlink($file_name);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$result&amp;nbsp;=&amp;nbsp;M(&amp;#39;note&amp;#39;)-&amp;gt;where($map)-&amp;gt;delete();\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($result){\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;success(&amp;#39;删除成功&amp;#39;,U(&amp;#39;Index/Note/listView&amp;#39;));\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;error(&amp;#39;删除失败&amp;#39;);\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\r\n\r\n?&amp;gt;&lt;/pre&gt;&lt;p&gt;sss&lt;br/&gt;&lt;/p&gt;', '2016-06-19 20:27:55', '2', '15');
INSERT INTO `note` VALUES ('43', '学习学习', '&lt;p&gt;似懂非懂顶顶顶顶顶顶顶顶顶顶顶顶顶顶sssssss顶&lt;br/&gt;&lt;/p&gt;', '2016-06-19 20:37:12', '3', '17');

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  `password` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('1', 'admin', '202cb962ac59075b964b07152d234b70');
INSERT INTO `user` VALUES ('2', 'wdt', '202cb962ac59075b964b07152d234b70');
INSERT INTO `user` VALUES ('3', 'pwp', '202cb962ac59075b964b07152d234b70');
